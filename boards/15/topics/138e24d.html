<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

This is a static archive of the previous Open Grid Forum Redmine content management system saved from host redmine.ogf.org file /boards/15/topics/138?r=157 at Thu, 03 Nov 2022 23:30:53 GMT
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>occursCountKind when minOccurs = maxOccurs = 1 - Public Comments Archive - Open Grid Forum</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token"/>
<meta name="csrf-token" content="r8Eug2mxB/WVzjgYLFlaVTYqdY6Jf1KWLwk+E/4zIM4="/>
<link rel='shortcut icon' href='../../../favicon4460.ico?1425381960' />
<link href="../../../themes/ogf_redmine/stylesheets/application4460.css?1425381960" media="all" rel="stylesheet" type="text/css" />

<script src="../../../javascripts/prototype4460.js?1425381960" type="text/javascript"></script>
<script src="../../../javascripts/effects4460.js?1425381960" type="text/javascript"></script>
<script src="../../../javascripts/dragdrop4460.js?1425381960" type="text/javascript"></script>
<script src="../../../javascripts/controls4460.js?1425381960" type="text/javascript"></script>
<script src="../../../javascripts/application4460.js?1425381960" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
Event.observe(window, 'load', function(){ new WarnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>

<!--[if IE 6]>
    <style type="text/css">
      * html body{ width: expression( document.documentElement.clientWidth < 900 ? '900px' : '100%' ); }
      body {behavior: url(/stylesheets/csshover.htc?1425381960);}
    </style>
<![endif]-->
<link href="../../../plugin_assets/extended_fields/stylesheets/extended_fields4460.css?1425381960" media="screen" rel="stylesheet" type="text/css" /> <link href="../../../plugin_assets/wiking/stylesheets/wiking4460.css?1425381960" media="screen" rel="stylesheet" type="text/css" />
<!-- page specific tags -->

  <link href="../../../stylesheets/scm4460.css?1425381960" media="screen" rel="stylesheet" type="text/css" />
</head>
<body class="theme-Ogf redmine controller-messages action-show">
<div id="wrapper">
<div id="wrapper2">
<div id="top-menu">
    <div id="account">
        <ul><li><a href="https://redmine.ogf.org/login" class="login">Login</a></li>
<li><a href="../../../account/register.html" class="register">Register</a></li></ul>    </div>
    
    <ul><li><a href="../../../index.html" class="home">Home</a></li>
<li><a href="../../../projects.html" class="projects">Projects</a></li>
<li><a href="http://www.redmine.org/guide" class="help">Help</a></li></ul></div>

<div id="header">
    
    <div id="quick-search">
        <form action="https://redmine.ogf.org/search/index/editor-pubcomarchive" method="get">
        <input name="messages" type="hidden" value="1" />
        <label for='q'>
          <a href="../../../search/index/editor-pubcomarchive.html" accesskey="4">Search</a>:
        </label>
        <input accesskey="f" class="small" id="q" name="q" size="20" type="text" />
        </form>
        
    </div>
    

    <h1><a href="../../../projects/operations0807.html?jump=boards" class="root">Operations</a> » <a href="../../../projects/editor0807.html?jump=boards" class="ancestor">Editor</a> » <a href="../../../projects/editor-pubcom/boards.html?jump=boards" class="ancestor">Public Comments</a> » Public Comments Archive</h1>

    
    <div id="main-menu">
        <ul><li><a href="../../../projects/editor-pubcomarchive.html" class="overview">Overview</a></li>
<li><a href="../../../projects/editor-pubcomarchive/boards.html" class="boards selected">Forums</a></li></ul>
    </div>
    
</div>

<div class="nosidebar" id="main">
    <div id="sidebar">
        
        
  
  


    </div>

    <div id="content">
        
        <p class="breadcrumb"><a href="../../../projects/editor-pubcomarchive/boards.html">Forums</a> » <a href="../../../projects/editor-pubcomarchive/boards/15.html">#117 - DFDL v1.0 Revision</a> » </p>

<div class="contextual">
    <span class="message-138-watcher"></span>
    
    
    
</div>

<h2>occursCountKind when minOccurs = maxOccurs = 1</h2>

<div class="message">
<p><span class="author">Added by <a href="../../../users/62.html">Steve Hanson</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2013-10-14" title="10/14/2013 01:46 PM">about 9 years</a> ago</span></p>
<div class="wiki">
<p>Spec says that if an element carries minOccurs = maxOccurs = 1 then occursCountKind is not examined. The result of this is that is not possible to parse such an element such that the omission of the element causes a validation error. This is in contrast to minOccurs = maxOccurs = 2 where I could specify occursCountKind 'parsed' and cause a validation error if 2 occurrences not found. This seems inconsistent.</p>
</div>

</div>
<br />


<h3 class="comments">Replies (9)</h3>

  <div class="message reply" id="message-139">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="138d0fd.html?r=139#message-139">RE: occursCountKind when minOccurs = maxOccurs = 1</a>
    -
    Added by <a href="../../../users/62.html">Steve Hanson</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2013-10-15" title="10/15/2013 04:38 AM">about 9 years</a> ago
  </h4>
  <div class="wiki"><p>This is related to the public comment on recoverable errors. It's allowing parsers to stay on their feet and report errors rather than stopping parsing.</p></div>
  
  </div>

  <div class="message reply" id="message-155">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="138afc0.html?r=155#message-155">RE: occursCountKind when minOccurs = maxOccurs = 1</a>
    -
    Added by <a href="../../../users/91.html">Michael Beckerle</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2013-10-18" title="10/18/2013 12:08 PM">about 9 years</a> ago
  </h4>
  <div class="wiki"><p>This seems ok. If I put occursCountKind='implicit' into scope then I get the current behavior for all scalar elements (right?)</p>


	<p>If arrays generally do not have 'implicit' behavior - e.g., you want a format with parsed or expression semantics for arrays, but still want hard required scalars (a very common case I expect), then you have to jump through some hoops in constructing your schema because you have one dfdl property that has to frequently have different values. You can't put it into scope and have it just "do the right thing" everywhere unless 'implicit' is the right semantics for your arrays.</p>


	<p>Implementation wise, this suggestions is no big deal in complexity. We would simply tighten the definition of required scalar element to include occursCountKind='implicit'. It is literally less than one line of code.</p>


	<p>I am more worried about the required changes to the way schemas must be authored.</p></div>
  
  </div>

  <div class="message reply" id="message-156">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="1388e82.html?r=156#message-156">RE: occursCountKind when minOccurs = maxOccurs = 1</a>
    -
    Added by <a href="../../../users/62.html">Steve Hanson</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2013-10-21" title="10/21/2013 04:53 AM">about 9 years</a> ago
  </h4>
  <div class="wiki"><p>The dfdl:format annotations created IBM's DFDL schema wizards either set occursCountKind 'implicit' or 'fixed' (the latter for COBOL).<br />For the industry schemas we have created so far, the only one which does not have 'implicit' is ISO8583 which uses 'expression'. So changing the rules will cause a problem the latter, and is something IBM would have to manage. Normally I would be against a disruptive change such as this, but the current asymmetry has bothered me for a while.</p></div>
  
  </div>

  <div class="message reply" id="message-157">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="138e24d.html?r=157#message-157">RE: occursCountKind when minOccurs = maxOccurs = 1</a>
    -
    Added by <a href="../../../users/62.html">Steve Hanson</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2013-10-21" title="10/21/2013 04:54 AM">about 9 years</a> ago
  </h4>
  <div class="wiki"><p>And yes, if I put occursCountKind='implicit' into scope then I get the current behavior for all elements with minOccurs = maxOccurs = 1.</p></div>
  
  </div>

  <div class="message reply" id="message-206">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="138f8e5.html?r=206#message-206">RE: occursCountKind when minOccurs = maxOccurs = 1</a>
    -
    Added by <a href="../../../users/62.html">Steve Hanson</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2013-11-26" title="11/26/2013 04:46 AM">almost 9 years</a> ago
  </h4>
  <div class="wiki"><p>Spec used to say that a PoU was one of:</p>


	<p>1. Choice branch<br />2. Element in an unordered sequence <br />3. Optional element<br />4. Array element where minOccurs <> maxOccurs<br />5. Element in a sequence with a floating element</p>


	<p>The latest revision now calls these potential PoUs, changes 4 to be all array elements, and adds a table that says whether an array is an actual PoU depending on occursCountKind:</p>


	<p>1. Choice<br />2. Element in an unordered sequence <br />3. Optional element<br />4. Array element<br />5. Element in a sequence with a floating element</p>


	<p>If you look at the negative of this list, it is saying that what is not a potential PoU is a non-floating element with minOccurs = maxoccurs = 1 if it does not appear in either the branch of a choice or an unordered sequence or a sequence with floating elements.</p>


	<p>This public comment effectively makes ALL elements potential PoUs.</p></div>
  
  </div>

  <div class="message reply" id="message-224">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="13880ce.html?r=224#message-224">RE: occursCountKind when minOccurs = maxOccurs = 1</a>
    -
    Added by <a href="../../../users/91.html">Michael Beckerle</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2013-11-26" title="11/26/2013 01:10 PM">almost 9 years</a> ago
  </h4>
  <div class="wiki"><p>We should consider if we should fix this inconsistency differently.</p>


	<p>I suggest: if occursCountKind='parsed', we should require minOccurs="0".</p>


	<p>This is a much much smaller change to DFDL than changing the behavior of scalar elements.</p>


	<p>That means things that are occursCountKind='parsed' are always fully variable length, which is consistent with the behavior of 'parsed' as a format. This is just requiring a better match between the logical schema's use of min/maxOccurs and what is actually going on in the data representation.</p>


	<p>This notion: that the DFDL schema isn't "what you want out logically", but rather must reflect "how the data really behaves", is something we revisit over and over. To me, wanting minOccurs=maxOccurs=2, but occursCountKind='parsed' is a silly combination, and we just chose to assign some meaning to it arbitrarily. I think this was a mistake. We're letting the DFDL schema diverge too much from having to really describe the data format. To me, if the data is optional, then the logical model should reflect that optionality, and that is done with min/maxOccurs being different. In the case of occursCountKind='parsed', if we truly want it to mean the infoset will contain any number of occurrences, then I have no problem constraining it to minOccurs="0" (and even maxOccurs="unbounded").</p>


	<p>In any case, I'd much prefer to change the semantics of occursCountKind 'parsed' by adding a constraint, than change the behavior of scalar elements.</p></div>
  
  </div>

  <div class="message reply" id="message-225">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="1389e27.html?r=225#message-225">RE: occursCountKind when minOccurs = maxOccurs = 1</a>
    -
    Added by <a href="../../../users/62.html">Steve Hanson</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2013-11-27" title="11/27/2013 04:59 AM">almost 9 years</a> ago
  </h4>
  <div class="wiki"><p>I think you mean that occursCountKind 'parsed' can only be used when minOccurs <> maxOccurs, rather than minOccurs = "0".</p>


	<p>We already have a constraint that in an unordered sequence, the only allowable occursCountKind is 'parsed', so we would have to revisit that.</p>


	<p>But it doesn't solve my problem. I want the parser to be able to parse what is there without throwing a hard error, and then use validation to check the infoset. That is how XML parsing against a schema works - everything gets parsed then minOccurs/maxOccurs are used to validate.</p></div>
  
  </div>

  <div class="message reply" id="message-229">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="138a2d2.html?r=229#message-229">Resolved - RE: occursCountKind when minOccurs = maxOccurs = 1</a>
    -
    Added by <a href="../../../users/91.html">Michael Beckerle</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2013-12-02" title="12/02/2013 10:43 AM">almost 9 years</a> ago
  </h4>
  <div class="wiki"><p>Change is too large. Impacts unclear. Published schemas already assuming the current behavior.</p>


	<p>So this should stay as is.</p></div>
  
  </div>

  <div class="message reply" id="message-296">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="138f6b4.html?r=296#message-296">Closed: occursCountKind when minOccurs = maxOccurs = 1</a>
    -
    Added by <a href="../../../users/62.html">Steve Hanson</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2014-03-06" title="03/06/2014 12:32 PM">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>No update to experience documents or specification needed.</p></div>
  
  </div>

<p class="pagination"> (1-9/9)</p>








        
        <div style="clear:both;"></div>
    </div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="http://www.redmine.org/">Redmine</a> &copy; 2006-2012 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>

This is a static archive of the previous Open Grid Forum Redmine content management system saved from host redmine.ogf.org file /boards/15/topics/138?r=157 at Thu, 03 Nov 2022 23:30:53 GMT
</html>
