<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

This is a static archive of the previous Open Grid Forum Redmine content management system saved from host redmine.ogf.org file /boards/15/topics/43?r=72 at Thu, 03 Nov 2022 15:31:04 GMT
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>byteOrder not sufficient to implement MIL-STD-2045-47001D - Public Comments Archive - Open Grid Forum</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token"/>
<meta name="csrf-token" content="r8Eug2mxB/WVzjgYLFlaVTYqdY6Jf1KWLwk+E/4zIM4="/>
<link rel='shortcut icon' href='../../../favicon4460.ico?1425381960' />
<link href="../../../themes/ogf_redmine/stylesheets/application4460.css?1425381960" media="all" rel="stylesheet" type="text/css" />

<script src="../../../javascripts/prototype4460.js?1425381960" type="text/javascript"></script>
<script src="../../../javascripts/effects4460.js?1425381960" type="text/javascript"></script>
<script src="../../../javascripts/dragdrop4460.js?1425381960" type="text/javascript"></script>
<script src="../../../javascripts/controls4460.js?1425381960" type="text/javascript"></script>
<script src="../../../javascripts/application4460.js?1425381960" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
Event.observe(window, 'load', function(){ new WarnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>

<!--[if IE 6]>
    <style type="text/css">
      * html body{ width: expression( document.documentElement.clientWidth < 900 ? '900px' : '100%' ); }
      body {behavior: url(/stylesheets/csshover.htc?1425381960);}
    </style>
<![endif]-->
<link href="../../../plugin_assets/extended_fields/stylesheets/extended_fields4460.css?1425381960" media="screen" rel="stylesheet" type="text/css" /> <link href="../../../plugin_assets/wiking/stylesheets/wiking4460.css?1425381960" media="screen" rel="stylesheet" type="text/css" />
<!-- page specific tags -->

  <link href="../../../stylesheets/scm4460.css?1425381960" media="screen" rel="stylesheet" type="text/css" />
</head>
<body class="theme-Ogf redmine controller-messages action-show">
<div id="wrapper">
<div id="wrapper2">
<div id="top-menu">
    <div id="account">
        <ul><li><a href="https://redmine.ogf.org/login/index.html" class="login">Logins disabled</a></li>
<li><a href="../../../account/register.html" class="register">Register</a></li></ul>    </div>
    
    <ul><li><a href="../../../index.html" class="home">Home</a></li>
<li><a href="../../../projects.html" class="projects">Projects</a></li>
<li><a href="http://www.redmine.org/guide" class="help">Help</a></li></ul></div>

<div id="header">
    
    <div id="quick-search">
        <form action="https://redmine.ogf.org/search/index/editor-pubcomarchive" method="get">
        <input name="messages" type="hidden" value="1" />
        <label for='q'>
          <a href="../../../search/index/editor-pubcomarchive.html" accesskey="4">Search</a>:
        </label>
        <input accesskey="f" class="small" id="q" name="q" size="20" type="text" />
        </form>
        
    </div>
    

    <h1><a href="../../../projects/operations0807.html?jump=boards" class="root">Operations</a> » <a href="../../../projects/editor0807.html?jump=boards" class="ancestor">Editor</a> » <a href="../../../projects/editor-pubcom/boards.html?jump=boards" class="ancestor">Public Comments</a> » Public Comments Archive</h1>

    
    <div id="main-menu">
        <ul><li><a href="../../../projects/editor-pubcomarchive.html" class="overview">Overview</a></li>
<li><a href="../../../projects/editor-pubcomarchive/boards.html" class="boards selected">Forums</a></li></ul>
    </div>
    
</div>

<div class="nosidebar" id="main">
    <div id="sidebar">
        
        
  
  


    </div>

    <div id="content">
        
        <p class="breadcrumb"><a href="../../../projects/editor-pubcomarchive/boards.html">Forums</a> » <a href="../../../projects/editor-pubcomarchive/boards/15.html">#117 - DFDL v1.0 Revision</a> » </p>

<div class="contextual">
    <span class="message-43-watcher"></span>
    
    
    
</div>

<h2>byteOrder not sufficient to implement MIL-STD-2045-47001D</h2>

<div class="message">
<p><span class="author">Added by <a href="../../../users/91.html">Michael Beckerle</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2013-09-26" title="09/26/2013 05:28 PM">about 9 years</a> ago</span></p>
<div class="wiki">
<p>This standard, which is very similar to many other MIL formats, is publicly available.</p>


	<p>DFDL is not providing enough control over binary data formats.</p>


	<p>dfdl:byteOrder not sufficient to implement MIL-STD-2045-47001D (<a class="external" href="http://tinyurl.com/peqz8ch">http://tinyurl.com/peqz8ch</a> redirects to one official place to get it. This standard is public.)</p>


	<p>This format requires that bytes be interpreted with the bits least-significant-bit first.</p>


	<p>DFDL only allows describing data where the bytes are placed in big-endian or little-endian order, but it has no control over the bits within a byte.</p>


	<p>E.g., Suppose I have these two bytes expressed as hex: 1a2b</p>


	<p>Interpreting these as bigEndian the value is 0x1a2b.<br />Interpreting these as littleEndian (byte order), the value is 0x2b1a.</p>


	<p>MIL-STD 2045 47001D requires that this be interpreted as the value 0xD458, which is what you get if you use littleEndian byte order, and little-endian interpretation of the bits within a byte: If you expand 1a2b into bits you get 00011010 00101011. If you then reverse this bit string you get 11010100 01011000, and then convert back to hex you get hex D458, which is the correct interpretation as far as MIL-STD 2045 47001 is concerned.</p>


	<p>I believe we need a new property. Suggest dfdl:bitOrder with values "leastSignificantBitFirst" "mostSignificantBitFirst". Current functionality of DFDL is preserved with dfdl:bitOrder="mostSignificantBitFirst".</p>
</div>

</div>
<br />


<h3 class="comments">Replies (13)</h3>

  <div class="message reply" id="message-72">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="43e7e5.html?r=72#message-72">RE: byteOrder not sufficient to implement MIL-STD-2045-47001D</a>
    -
    Added by <a href="../../../users/62.html">Steve Hanson</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2013-09-27" title="09/27/2013 04:29 AM">about 9 years</a> ago
  </h4>
  <div class="wiki"><p>Mike, what logical and physical data types does this apply too?</p></div>
  
  </div>

  <div class="message reply" id="message-78">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="43b07b.html?r=78#message-78">RE: byteOrder not sufficient to implement MIL-STD-2045-47001D</a>
    -
    Added by <a href="../../../users/91.html">Michael Beckerle</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2013-09-30" title="09/30/2013 10:30 AM">about 9 years</a> ago
  </h4>
  <div class="wiki"><p>This format contains strings that use us-ascii-7-bit-packed encoding, signed integers, and single-bit flags. The format in question is a header format. It is also possible for them to contain "payloads" that use 8-bit characters.</p>


	<p>However, complex types composed of these simple types all depend on this bit ordering as well.</p></div>
  
  </div>

  <div class="message reply" id="message-79">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="4387bc.html?r=79#message-79">RE: byteOrder not sufficient to implement MIL-STD-2045-47001D</a>
    -
    Added by <a href="../../../users/62.html">Steve Hanson</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2013-09-30" title="09/30/2013 11:04 AM">about 9 years</a> ago
  </h4>
  <div class="wiki"><p>I'm trying to work out whether bit-order is an orthogonal concept to encoding and byte-order (requiring a new property), or whether what we have is just a different encoding and a different byte-order.</p></div>
  
  </div>

  <div class="message reply" id="message-80">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="43787e.html?r=80#message-80">RE: byteOrder not sufficient to implement MIL-STD-2045-47001D</a>
    -
    Added by <a href="../../../users/91.html">Michael Beckerle</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2013-09-30" title="09/30/2013 11:23 AM">about 9 years</a> ago
  </h4>
  <div class="wiki"><p>Bit order is orthogonal to byte order and encoding.</p>


	<p>You read exactly one byte of data, and it either represents one number, or another. So byte order is irrelevant, and encoding is irrelevant.</p>


	<p>bit order MSB first, 0x14, is 00010100, is the same byte as LSB first 00101000 or 0x28.</p>


	<p>If you have two bytes, then when MSB is first, the MSB of the 2nd byte is considered adjacent to the LSB of the first byte. This is also orthogonal to byte order. When LSB is first, the LSB of the 2nd byte is considered adjacent to the MSB of the first byte.</p></div>
  
  </div>

  <div class="message reply" id="message-81">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="431e66.html?r=81#message-81">RE: byteOrder not sufficient to implement MIL-STD-2045-47001D</a>
    -
    Added by <a href="../../../users/91.html">Michael Beckerle</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2013-09-30" title="09/30/2013 11:53 AM">about 9 years</a> ago
  </h4>
  <div class="wiki"><p>In the spec document for MIL-STD-2045-47001D, Table B-I on page 70 gives a worked example showing the bit positions of each field within a byte.</p></div>
  
  </div>

  <div class="message reply" id="message-86">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="439da1.html?r=86#message-86">RE: byteOrder not sufficient to implement MIL-STD-2045-47001D</a>
    -
    Added by <a href="../../../users/91.html">Michael Beckerle</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2013-09-30" title="09/30/2013 09:41 PM">about 9 years</a> ago
  </h4>
  <div class="wiki"><p>An additional consideration.</p>


	<p>If a bitOrder property was implemented, then what does it mean for one element to have bitOrder="mostSignificantBitFirst", and the adjacent element bitOrder="leastSignificantBitFirst".</p>


	<p>If the two elements are separated by a byte boundary, then there is no issue.</p>


	<p>But if the boundary of the two elements is not on a byte boundary, then the concept isn't well defined.</p>


	<p>So this would have to be a constraint when composing DFDL schema elements together, that the bitOrder can only be switched on an aligned 8-bit boundary.</p></div>
  
  </div>

  <div class="message reply" id="message-87">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="43c7c9.html?r=87#message-87">RE: byteOrder not sufficient to implement MIL-STD-2045-47001D</a>
    -
    Added by <a href="../../../users/91.html">Michael Beckerle</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2013-09-30" title="09/30/2013 10:16 PM">about 9 years</a> ago
  </h4>
  <div class="wiki"><p>Section 3.1.1 of <a class="external" href="http://www.gzip.org/zlib/rfc-deflate.html#packing">http://www.gzip.org/zlib/rfc-deflate.html#packing</a></p>


	<p>describes the packing of bits into bytes for the deflate algorithm and this also uses LSBit first ordering.</p>


	<p>Just so as to point out it is more than just this one family of MIL standards.</p></div>
  
  </div>

  <div class="message reply" id="message-112">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="4329a2.html?r=112#message-112">RE: byteOrder not sufficient to implement MIL-STD-2045-47001D</a>
    -
    Added by <a href="../../../users/107.html">Tim Kimber</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2013-10-02" title="10/02/2013 08:17 AM">about 9 years</a> ago
  </h4>
  <div class="wiki"><p>Let's assume that an implementation could, in principle, cater for bit-reversed regions by inserting a bit-reversal stage between the byte stream and the DFDL processor. I'm assuming that every bit-reversed region would occupy an integer number of octets. Such an implementation would be quite straightforward because all other processing algorithms would be unaffected.</p>


	<p>That makes me wonder whether we should preserve our 'freedom of movement' for the future by making this an enum. I don't think we will get any more requirements for simple bit-shuffling, but I have been asked whether DFDL can operate on base64 data fields. That would be another case of a whole number of octets that need to be decoded into a byte stream. Encrypted regions or zipped regions could be handled in the same way.</p>


	<p>I don't think these should be mandatory features of a DFDL implementation. If standardized at all, they would need to be optional features. One option  would be to specify that the enum for bit-order can accept implementation-specific enums for handling bottom-layer byte stream pre-processing.</p></div>
  
  </div>

  <div class="message reply" id="message-118">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="4368d4.html?r=118#message-118">RE: byteOrder not sufficient to implement MIL-STD-2045-47001D</a>
    -
    Added by <a href="../../../users/91.html">Michael Beckerle</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2013-10-07" title="10/07/2013 04:39 PM">about 9 years</a> ago
  </h4>
  <div class="wiki"><p>It is not quite that simple. Sorry if I made it seem that way.</p>


	<p>Let's look at 'abc' in 7-bit characters, stored least-significant-bit-first.</p>


	<p>Ascii codes for abc are 0x61 0x62 and 0x63.</p>


	<p>Stored LSB first, those will be (in bits from left to right)</p>


	<p>1000011 0100011 1100011</p>


	<p>Grouped into bytes:</p>


	<p>10000110 10001111 00011 + 000 (3 padding bits to fill out the final byte)</p>


	<p>Now, if we simply flip the bits of each byte around:</p>


	<p>01100001 11110001 00011000</p>


	<p>The data did not magically become normal MSB-first data. The 'a' character is still occupying the 7 least-significant bits of the first byte. Viewed Most-significant bit first, the 'a' character is bits 2 to 8 (1-based indexing). Bit 1 is actually part of the 'b' character. In fact the only thing flipping the bits around achieved is now the seven bits of the 'a' character are in the expected place-value order the way we normally right a number down: 1100001. That is, the numeric value of the field is now most-significant-bit first, but the bits themselves are not first within the byte in msb-first order. We still have to treat the bits as numbered 1 to 8 starting on the right of each byte, and proceeding left.</p>


	<p>So it isn't so simple as just reversing the bits of each byte, as the way the bits are numbered within a byte remains fundamentally different.</p></div>
  
  </div>

  <div class="message reply" id="message-161">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="43ee82.html?r=161#message-161">Deferred: byteOrder not sufficient to implement MIL-STD-2045-47001D</a>
    -
    Added by <a href="../../../users/62.html">Steve Hanson</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2013-10-31" title="10/31/2013 11:21 AM">about 9 years</a> ago
  </h4>
  <div class="wiki"><p>Deferring until the Daffodil implementation has had a stab at actually handling this.</p></div>
  
  </div>

  <div class="message reply" id="message-370">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="43ed39.html?r=370#message-370">Deferred: byteOrder not sufficient to implement MIL-STD-2045-47001D</a>
    -
    Added by <a href="../../../users/91.html">Michael Beckerle</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2014-06-24" title="06/24/2014 03:24 PM">over 8 years</a> ago
  </h4>
  <div class="wiki"><p>An experience document describing a bitOrder property and various other things needed to fix this limitation is <br />here: <a class="external" href="../../../dmsf_files/13268.html">http://redmine.ogf.org/dmsf_files/13268</a>.</p></div>
  
  </div>

  <div class="message reply" id="message-375">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="437695.html?r=375#message-375">DONE: byteOrder not sufficient to implement MIL-STD-2045-47001D</a>
    -
    Added by <a href="../../../users/62.html">Steve Hanson</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2014-09-12" title="09/12/2014 04:57 AM">about 8 years</a> ago
  </h4>
  <div class="wiki"><p>The above experience document has evolved into this official experience document <a class="external" href="../../../dmsf_files/13337.html">http://redmine.ogf.org/dmsf_files/13337</a>.<br />This describes a new dfdl:bitOrder property which addresses this public comment.</p></div>
  
  </div>

  <div class="message reply" id="message-386">
    <div class="contextual">
      
      
      
    </div>
  <h4>
    
    <a href="4321f1.html?r=386#message-386">DONE - RE: byteOrder not sufficient to implement MIL-STD-2045-47001D</a>
    -
    Added by <a href="../../../users/62.html">Steve Hanson</a> <a href="https://redmine.ogf.org/projects/editor-pubcomarchive/activity?from=2014-09-12" title="09/12/2014 09:29 AM">about 8 years</a> ago
  </h4>
  <div class="wiki"><p><a class="external" href="../../../issues/168.html">http://redmine.ogf.org/issues/168</a></p></div>
  
  </div>

<p class="pagination"> (1-13/13)</p>








        
        <div style="clear:both;"></div>
    </div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="http://www.redmine.org/">Redmine</a> &copy; 2006-2012 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>

This is a static archive of the previous Open Grid Forum Redmine content management system saved from host redmine.ogf.org file /boards/15/topics/43?r=72 at Thu, 03 Nov 2022 15:31:04 GMT
</html>
