<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

This is a static archive of the previous Open Grid Forum Redmine content management system saved from host redmine.ogf.org file /issues/319 at Wed, 26 Oct 2022 22:59:36 GMT
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>document #319: Action 242 part 4 - length units 'characters' and encoding error detection - dfdl:valueLength and dfdl:contentLength - DFDL WG - Open Grid Forum</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta name="csrf-param" content="authenticity_token"/>
<meta name="csrf-token" content="AK0U3Lb6dpt4WWTJJ0cRxmhtMBdpfG/nfcCkNBP2hXA="/>
<link rel='shortcut icon' href='../favicon4460.ico?1425381960' />
<link href="../themes/ogf_redmine/stylesheets/application4460.css?1425381960" media="all" rel="stylesheet" type="text/css" />

<script src="../javascripts/prototype4460.js?1425381960" type="text/javascript"></script>
<script src="../javascripts/effects4460.js?1425381960" type="text/javascript"></script>
<script src="../javascripts/dragdrop4460.js?1425381960" type="text/javascript"></script>
<script src="../javascripts/controls4460.js?1425381960" type="text/javascript"></script>
<script src="../javascripts/application4460.js?1425381960" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
Event.observe(window, 'load', function(){ new WarnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>

<!--[if IE 6]>
    <style type="text/css">
      * html body{ width: expression( document.documentElement.clientWidth < 900 ? '900px' : '100%' ); }
      body {behavior: url(/stylesheets/csshover.htc?1425381960);}
    </style>
<![endif]-->
<link href="../plugin_assets/extended_fields/stylesheets/extended_fields4460.css?1425381960" media="screen" rel="stylesheet" type="text/css" /> <link href="../plugin_assets/wiking/stylesheets/wiking4460.css?1425381960" media="screen" rel="stylesheet" type="text/css" />
<!-- page specific tags -->

    <link href="https://redmine.ogf.org/issues/319.atom" rel="alternate" title="DFDL WG - document #319: Action 242 part 4 - length units 'characters' and encoding error detection - dfdl:valueLength and dfdl:contentLength" type="application/atom+xml" />
    <link href="../stylesheets/scm4460.css?1425381960" media="screen" rel="stylesheet" type="text/css" />
    <script src="../javascripts/context_menu4460.js?1425381960" type="text/javascript"></script>
    <link href="../stylesheets/context_menu4460.css?1425381960" media="screen" rel="stylesheet" type="text/css" />
    
</head>
<body class="theme-Ogf redmine controller-issues action-show">
<div id="wrapper">
<div id="wrapper2">
<div id="top-menu">
    <div id="account">
        <ul><li><a href="https://redmine.ogf.org/login" class="login">Login</a></li>
<li><a href="../account/register.html" class="register">Register</a></li></ul>    </div>
    
    <ul><li><a href="../index.html" class="home">Home</a></li>
<li><a href="../projects.html" class="projects">Projects</a></li>
<li><a href="http://www.redmine.org/guide" class="help">Help</a></li></ul></div>

<div id="header">
    
    <div id="quick-search">
        <form action="https://redmine.ogf.org/search/index/dfdl-wg" method="get">
        <input name="issues" type="hidden" value="1" />
        <label for='q'>
          <a href="../search/index/dfdl-wg.html" accesskey="4">Search</a>:
        </label>
        <input accesskey="f" class="small" id="q" name="q" size="20" type="text" />
        </form>
        
    </div>
    

    <h1><a href="../projects/standards/issues.html?jump=issues" class="root">Standards</a> » <a href="../projects/data-area/issues.html?jump=issues" class="ancestor">Data Area</a> » DFDL WG</h1>

    
    <div id="main-menu">
        <ul><li><a href="../projects/dfdl-wg.html" class="overview">Overview</a></li>
<li><a href="../tab/show/dfdl-wg.html" class="tab">Project Info</a></li>
<li><a href="../projects/dfdl-wg/roadmap.html" class="roadmap">Roadmap</a></li>
<li><a href="../projects/dfdl-wg/issues.html" class="issues selected">Issues</a></li>
<li><a href="../projects/dfdl-wg/issues/calendar.html" class="calendar">Calendar</a></li>
<li><a href="../projects/dfdl-wg/news.html" class="news">News</a></li>
<li><a href="../dmsf/dfdl-wg.html" class="dmsf">Documents</a></li>
<li><a href="../projects/dfdl-wg/wiki.html" class="wiki">Wiki</a></li>
<li><a href="../projects/dfdl-wg/files.html" class="files">Files</a></li>
<li><a href="../projects/dfdl-wg/repository.html" class="repository">Repository</a></li>
<li><a href="../projects/dfdl-wg/embedded/index.html" class="embedded">Mailing Lists</a></li></ul>
    </div>
    
</div>

<div class="" id="main">
    <div id="sidebar">
        
  <h3>Issues</h3>
<a href="https://redmine.ogf.org/projects/dfdl-wg/issues?set_filter=1">View all issues</a><br />

<a href="../projects/dfdl-wg/issues/report.html">Summary</a><br />


  
  




  <a href="../projects/dfdl-wg/issues/calendar.html">Calendar</a><br />




<h3>Custom queries</h3><a href="../projects/dfdl-wg/issues1f97.html?query_id=3">open grouped by target version sorted by last updated</a>



  

        
  
  


    </div>

    <div id="content">
        
        <div class="contextual">


<span class="issue-319-watcher"></span>




</div>


<h2>document #319</h2>

<div class="issue status-16 priority-2 closed details">
        

<div class="subject">
<div><h3>Action 242 part 4 - length units 'characters' and encoding error detection - dfdl:valueLength and dfdl:contentLength</h3></div>
</div>
        <p class="author">
        Added by <a href="../users/91.html">Michael Beckerle</a> <a href="https://redmine.ogf.org/projects/dfdl-wg/activity?from=2016-08-02" title="08/02/2016 01:18 PM">about 6 years</a> ago.
        
        Updated <a href="https://redmine.ogf.org/projects/dfdl-wg/activity?from=2020-10-29" title="10/29/2020 01:28 PM">almost 2 years</a> ago.
        
        </p>

<table class="attributes">
<tr>
    <th class="status">Status:</th><td class="status">closed</td>
    <th class="start-date">Start date:</th><td class="start-date">08/02/2016</td>
</tr>
<tr>
    <th class="priority">Priority:</th><td class="priority">Normal</td>
    <th class="due-date">Due date:</th><td class="due-date"></td>
</tr>
<tr>
    <th class="assigned-to">Assignee:</th><td class="assigned-to">-</td>
    <th class="progress">% Done:</th><td class="progress"><table class="progress" style="width: 80px;"><tr><td class="closed" style="width: 100%;"></td></tr></table><p class="pourcent">100%</p></td>
</tr>
<tr>
    <th class="category">Category:</th><td class="category">-</td>
    
</tr>
<tr>
    <th class="fixed-version">Target version:</th><td class="fixed-version"><a href="../versions/2.html">DFDL v1.0</a></td>
    
</tr>
<tr>
	<th>Document Type:</th><td>Proposed Recommendation</td>
</tr>


</table>

<hr />

  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>The functions dfdl:valueLength and dfdl:contentLength take a second argument giving the units.</p>


	<p>These functions when measured in units 'characters', are allowed to compute the length without checking for decode errors when (a) the encoding is fixed width - so a character unit is just an alias for some number of bytes (b) encodingErrorPolicy='error'.</p>


	<p>Just because encodingErrorPolicy is 'error', doesn't mean all data in scope of that will be scanned to be sure there are no decode errors.</p>


	<p>Other features with similar issues are regex pattern asserts. In this case the regex is matching against text, and that match might or might not encounter a decode error, but the entire scope of data it's talking about is NOT going to get converted just to insure no chance of a decode error.</p>


	<p>DFDL implementations can optimize performance by avoiding character decoding when possible. This means that some character decode errors may not be detected even though dfdl:encodingErrorPolicy is 'error'.</p>


	<p>The Spe should be clarified to say that only character decoding that results in a character being placed into the DFDL Infoset, or that is necessary to identify a delimiter is guaranteed to cause an error should that character not be decodable.</p>


	<p>When unparsing, it is only if we actually unparse an unmapped character from the infoset to the output stream, that a encoding error is guaranteed to occur.</p>


	<p>DFDL implementations are free to exploit fixed character width, and just jumping around the bytes and not decoding/encoding anything - whenever they can, because we all expect, and think our users will expect, this level of performance.</p>


	<p>Because utf-8 encoding is required by DFDL, and is not fixed width, one may also get cases where switching from utf-16 to utf-8 for a data format changes the behavior of the processor because utf-16 wouldn't detect some decoding errors because of fixed width, whereas when using utf-8 will have to measure length in characters by decoding and so will detect the error.</p>


	<p>The objective here is to make a consistent position around a messy area: The schema contains a complex type element which is a mixture of character encodings, binary stuff, and may have decode errors in the corresponding data stream (or characters in the infoset that have no mapping into the representation of the encoding - for unparsing).</p>


	<p>Given this mess, there are ways that a schema can look at it, and foolishly-perhaps, treat it as characters. Asserts with test patterns are one. Specified length with units of 'characters' is another, and the dfdl:contentLength and dfdl:valueLength functions is yet another, since one can specify the units 'characters' as that 2nd argument.</p>


	<p>The consistent position is that dfdl:contentLength or dfdl:valueLength of an element, with units 'characters' does NOT necessarily imply those characters will be decoded/encoded if the length can be determined without doing such decoding.</p>
  </div>









</div>




<div id="history">
<h3>History</h3>

  <div id="change-1204" class="journal has-details">
    <h4><div class="journal-link"><a href="319.html#note-1">#1</a></div>
    
    <a name="note-1"></a>
    Updated by <a href="../users/91.html">Michael Beckerle</a> <a href="https://redmine.ogf.org/projects/dfdl-wg/activity?from=2017-11-21" title="11/21/2017 10:55 AM">almost 5 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Target version</strong> set to <i>DFDL v1.0</i></li>
      
    </ul>
    
    
  </div>
  

  <div id="change-1269" class="journal has-notes">
    <h4><div class="journal-link"><a href="319.html#note-2">#2</a></div>
    
    <a name="note-2"></a>
    Updated by <a href="../users/25297.html">Dennis Kemp</a> <a href="https://redmine.ogf.org/projects/dfdl-wg/activity?from=2019-06-21" title="06/21/2019 03:21 AM">over 3 years</a> ago</h4>

    
    <div class="wiki" id="journal-1269-notes"><p>Spam comment deleted.</p></div>
  </div>
  

  <div id="change-1285" class="journal has-notes">
    <h4><div class="journal-link"><a href="319.html#note-3">#3</a></div>
    
    <a name="note-3"></a>
    Updated by <a href="../users/25485.html">Suleman Raza</a> <a href="https://redmine.ogf.org/projects/dfdl-wg/activity?from=2019-07-16" title="07/16/2019 03:58 AM">over 3 years</a> ago</h4>

    
    <div class="wiki" id="journal-1285-notes"><p>Spam comment deleted.</p></div>
  </div>
  

  <div id="change-1324" class="journal has-notes has-details">
    <h4><div class="journal-link"><a href="319.html#note-4">#4</a></div>
    
    <a name="note-4"></a>
    Updated by <a href="../users/91.html">Michael Beckerle</a> <a href="https://redmine.ogf.org/projects/dfdl-wg/activity?from=2019-10-11" title="10/11/2019 04:14 PM">about 3 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>submitted</i> to <i>accepted</i></li>
      
    </ul>
    
    <div class="wiki" id="journal-1324-notes"><p>Erratum 5.47</p></div>
  </div>
  

  <div id="change-1402" class="journal has-details">
    <h4><div class="journal-link"><a href="319.html#note-5">#5</a></div>
    
    <a name="note-5"></a>
    Updated by <a href="../users/91.html">Michael Beckerle</a> <a href="https://redmine.ogf.org/projects/dfdl-wg/activity?from=2020-10-29" title="10/29/2020 01:28 PM">almost 2 years</a> ago</h4>

    
    <ul class="details">
      
       <li><strong>Status</strong> changed from <i>accepted</i> to <i>closed</i></li>
      
       <li><strong>% Done</strong> changed from <i>0</i> to <i>100</i></li>
      
    </ul>
    
    
  </div>
  




</div>



<div style="clear: both;"></div>
<div class="contextual">


<span class="issue-319-watcher"></span>




</div>


<div style="clear: both;"></div>


<p class="other-formats">(Other formats not available in this archive.</p>






<div id="context-menu" style="display: none;"></div>
<script type="text/javascript">
//<![CDATA[
new ContextMenu('/issues/context_menu')
//]]>
</script>

        
        <div style="clear:both;"></div>
    </div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Powered by <a href="http://www.redmine.org/">Redmine</a> &copy; 2006-2012 Jean-Philippe Lang
  </div></div>
</div>
</div>
</div>

</body>

This is a static archive of the previous Open Grid Forum Redmine content management system saved from host redmine.ogf.org file /issues/319 at Wed, 26 Oct 2022 22:59:39 GMT
</html>
